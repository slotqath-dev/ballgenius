<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinOffside Demo</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:sans-serif}
body{background:#0f0f0f;color:#fff}
header{
  padding:15px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  background:#111;
  border-bottom:1px solid #222;
}
.tabs{
  display:flex;
  background:#111;
}
.tabs button{
  flex:1;
  padding:12px;
  background:none;
  border:none;
  color:#aaa;
  font-size:14px;
}
.tabs button.active{
  color:#fff;
  border-bottom:2px solid #e60000;
}
.section{display:none;padding:15px}
.section.active{display:block}

.match{
  background:#181818;
  padding:12px;
  margin-bottom:10px;
  border-radius:10px;
}
.teams{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}
.odds{
  display:flex;
  gap:10px;
}
.odds button{
  flex:1;
  padding:8px;
  background:#222;
  border:none;
  color:#fff;
  border-radius:6px;
}
.odds button:hover{
  background:#e60000;
}

.slip{
  background:#181818;
  padding:10px;
  border-radius:10px;
}
.slip-item{
  border-bottom:1px solid #222;
  padding:8px 0;
}
.total{
  margin-top:10px;
  font-weight:bold;
}
input{
  width:100%;
  padding:8px;
  margin-top:10px;
  border:none;
  border-radius:6px;
}
.bet-btn{
  width:100%;
  margin-top:10px;
  padding:10px;
  background:#e60000;
  border:none;
  color:#fff;
  border-radius:8px;
  font-weight:bold;
}
</style>
</head>

<body>

<header>⚽ WinOffside Demo</header>

<div class="tabs">
  <button class="active" onclick="showTab(0)">หน้าแรก</button>
  <button onclick="showTab(1)">โปรแกรม</button>
  <button onclick="showTab(2)">สลิป (<span id="count">0</span>)</button>
</div>

<div class="section active">
  <h3>ยินดีต้อนรับ</h3>
  <p>ระบบจำลอง Mini App ไม่ใช้ API</p>
</div>

<div class="section" id="matches"></div>

<div class="section">
  <div class="slip" id="slip"></div>
  <input type="number" id="amount" placeholder="ใส่ยอดเดิมพัน">
  <div class="total">ยอดจ่าย: <span id="payout">0</span> บาท</div>
  <button class="bet-btn" onclick="placeBet()">ยืนยันเดิมพัน</button>
</div>

<script>
const matchesData = [
  {home:"แมนยู",away:"ลิเวอร์พูล",odds:[1.95,3.20,2.10]},
  {home:"มาดริด",away:"บาซ่า",odds:[2.00,3.50,1.85]},
  {home:"บาเยิร์น",away:"ดอร์ทมุนด์",odds:[1.70,3.80,2.50]}
];

let slip = [];

function showTab(i){
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.querySelectorAll(".tabs button")[i].classList.add("active");
  document.querySelectorAll(".section")[i].classList.add("active");
}

function renderMatches(){
  const container = document.getElementById("matches");
  container.innerHTML="";
  matchesData.forEach((m,index)=>{
    container.innerHTML+=`
      <div class="match">
        <div class="teams">
          <span>${m.home}</span>
          <span>vs</span>
          <span>${m.away}</span>
        </div>
        <div class="odds">
          <button onclick="addSlip('${m.home}',${m.odds[0]})">${m.odds[0]}</button>
          <button onclick="addSlip('เสมอ',${m.odds[1]})">${m.odds[1]}</button>
          <button onclick="addSlip('${m.away}',${m.odds[2]})">${m.odds[2]}</button>
        </div>
      </div>
    `;
  });
}

function addSlip(team,odd){
  slip.push({team,odd});
  updateSlip();
}

function updateSlip(){
  const container = document.getElementById("slip");
  container.innerHTML="";
  let totalOdd = 1;
  slip.forEach(s=>{
    totalOdd *= s.odd;
    container.innerHTML+=`
      <div class="slip-item">
        ${s.team} @ ${s.odd}
      </div>
    `;
  });
  document.getElementById("count").innerText = slip.length;
  calculate();
}

function calculate(){
  const amount = Number(document.getElementById("amount").value);
  let totalOdd = 1;
  slip.forEach(s=> totalOdd *= s.odd);
  document.getElementById("payout").innerText = amount ? (amount * totalOdd).toFixed(2) : 0;
}

document.getElementById("amount").addEventListener("input",calculate);

function placeBet(){
  if(slip.length===0) return alert("ยังไม่มีรายการ");
  alert("เดิมพันสำเร็จ (Demo)");
  slip=[];
  updateSlip();
  document.getElementById("amount").value="";
  calculate();
}

renderMatches();
</script>

</body>
</html>
