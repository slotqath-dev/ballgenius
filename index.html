<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA BallGenius</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
/* === STYLE เดิมของคุณทั้งหมด (ไม่แตะ) === */
:root{
  --card:#161616;--red:#e60000;--white:#fff;
  --muted:#aaa;--accent:#ffd200;
  --bg-color:#000;
  --overlay:rgba(0,0,0,.88);
}
*{box-sizing:border-box;font-family:sans-serif}
body{
  margin:0;color:var(--white);
  background:linear-gradient(var(--overlay),var(--overlay)),#000;
  min-height:100vh;
}
header{
  padding:14px;display:flex;align-items:center;
  background:linear-gradient(180deg,#300,#000);
  border-bottom:2px solid var(--red);
}
.logo{font-size:24px;font-weight:900}
.logo span{color:var(--red)}

.leagues{display:flex;gap:12px;padding:12px;overflow-x:auto}
.league{
  width:64px;height:64px;flex:0 0 auto;
  background:#161616;border-radius:16px;
  border:2px solid transparent;
  display:flex;align-items:center;justify-content:center;
}
.league.active{border-color:var(--accent)}
.league img{width:100%;height:100%;object-fit:contain;background:#fff;padding:6px;border-radius:12px}

.content{padding:14px;padding-bottom:90px}
.match{background:#161616;border-radius:18px;padding:14px;margin-bottom:12px}
.league-name{color:var(--accent);font-size:13px;margin-bottom:6px}
.time{font-size:12px;color:var(--muted);margin-bottom:10px}
.teams{display:flex;justify-content:space-between;align-items:center}
.team{width:40%;text-align:center}
.team img{width:48px;height:48px;background:#fff;padding:4px;border-radius:10px}
.score{font-size:20px;font-weight:900;color:var(--red)}

.bottom{
  position:fixed;bottom:0;left:0;right:0;
  background:linear-gradient(180deg,#200,#000);
  border-top:2px solid var(--red);
  display:flex;
}
.tab{flex:1;padding:10px 0;text-align:center;font-size:12px;color:var(--muted)}
.tab.active{color:var(--red);font-weight:700}
</style>
</head>

<body>

<header>
  <div class="logo"><span>QA</span> BallGenius</div>
</header>

<div class="leagues">
  <div class="league active" data-league="England"><img src="https://media.api-sports.io/football/leagues/39.png"></div>
  <div class="league" data-league="Spain"><img src="https://media.api-sports.io/football/leagues/140.png"></div>
  <div class="league" data-league="Germany"><img src="https://media.api-sports.io/football/leagues/78.png"></div>
  <div class="league" data-league="Italy"><img src="https://media.api-sports.io/football/leagues/135.png"></div>
  <div class="league" data-league="France"><img src="https://media.api-sports.io/football/leagues/61.png"></div>
  <div class="league" data-league="Champions League"><img src="https://media.api-sports.io/football/leagues/2.png"></div>
  <div class="league" data-league="Europa League"><img src="https://media.api-sports.io/football/leagues/3.png"></div>
  <div class="league" data-league="World"><img src="https://media.api-sports.io/football/leagues/1.png"></div>
</div>

<div class="content" id="matches">
  <div class="match">กำลังโหลดข้อมูล…</div>
</div>

<div class="bottom">
  <div class="tab active">โปรแกรม</div>
  <div class="tab">สด</div>
  <div class="tab">ไฮไลต์</div>
  <div class="tab">เพิ่มเติม</div>
</div>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

let allMatches = [];
const box = document.getElementById("matches");

fetch("https://www.scorebat.com/video-api/v3/")
.then(r=>r.json())
.then(j=>{
  allMatches = j.response;
  render("England");
})
.catch(()=>{
  box.innerHTML = '<div class="match">❌ โหลดข้อมูลไม่ได้ (API ฟรี)</div>';
});

function render(filter){
  box.innerHTML="";
  allMatches
    .filter(m=>m.competition.includes(filter))
    .slice(0,5)
    .forEach(m=>{
      const d = new Date(m.date);
      box.innerHTML += `
        <div class="match">
          <div class="league-name">${m.competition}</div>
          <div class="time">${d.toLocaleDateString("th-TH")} ${d.toLocaleTimeString("th-TH",{hour:'2-digit',minute:'2-digit'})}</div>
          <div class="teams">
            <div class="team"><div>${m.title.split(" vs ")[0]}</div></div>
            <div class="score">VS</div>
            <div class="team"><div>${m.title.split(" vs ")[1]}</div></div>
          </div>
        </div>`;
    });
}

document.querySelectorAll(".league").forEach(l=>{
  l.onclick=()=>{
    document.querySelectorAll(".league").forEach(x=>x.classList.remove("active"));
    l.classList.add("active");
    render(l.dataset.league);
  };
});
</script>

</body>
</html>
